# üîß –ö–†–ê–¢–ö–ê–Ø –ò–ù–°–¢–†–£–ö–¶–ò–Ø: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ Google OAuth –≤ Telegram

## üéØ –ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å

–Ø –Ω–∞—à–µ–ª –∏ –∏—Å–ø—Ä–∞–≤–∏–ª –ø—Ä–æ–±–ª–µ–º—É —Å Google –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–µ–π –≤ Telegram Mini App.

### ‚úÖ –ß—Ç–æ —É–∂–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –≤ –∫–æ–¥–µ:

1. ‚úÖ –°–æ–∑–¥–∞–Ω –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏–π API —Ä–æ—É—Ç `/api/tokens/check`
2. ‚úÖ –£–ª—É—á—à–µ–Ω –ø—Ä–æ—Ü–µ—Å—Å –≤–æ–∑–≤—Ä–∞—Ç–∞ –≤ Telegram –ø–æ—Å–ª–µ OAuth
3. ‚úÖ –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–∞ –ª–æ–≥–∏–∫–∞ –∑–∞–∫—Ä—ã—Ç–∏—è –æ–∫–Ω–∞ –±—Ä–∞—É–∑–µ—Ä–∞

### ‚ö†Ô∏è –ß—Ç–æ –Ω—É–∂–Ω–æ –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞ Vercel:

---

## 1Ô∏è‚É£ –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

**Vercel Dashboard ‚Üí Settings ‚Üí Environment Variables**

–î–æ–ª–∂–Ω—ã –±—ã—Ç—å:
```
GOOGLE_CLIENT_ID = –≤–∞—à-id.apps.googleusercontent.com
GOOGLE_CLIENT_SECRET = GOCSPX-–≤–∞—à-—Å–µ–∫—Ä–µ—Ç
GOOGLE_REDIRECT_URI = https://–í–ê–®-–î–û–ú–ï–ù.vercel.app/api/auth/google/callback
NEXT_PUBLIC_GOOGLE_CALENDAR_API_KEY = –≤–∞—à-–∫–ª—é—á
```

**–ö–†–ò–¢–ò–ß–ï–°–ö–ò –í–ê–ñ–ù–û:**
- –ó–∞–º–µ–Ω–∏—Ç–µ `–í–ê–®-–î–û–ú–ï–ù` –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–π Vercel –¥–æ–º–µ–Ω
- URL –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å **–ë–ï–ó –ø—Ä–æ–±–µ–ª–æ–≤**
- –ü—É—Ç—å –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ `/api/auth/google/callback`

---

## 2Ô∏è‚É£ –ù–∞–π–¥–∏—Ç–µ –≤–∞—à Vercel –¥–æ–º–µ–Ω

**Vercel Dashboard ‚Üí Deployments** ‚Üí –Ω–∞–∂–º–∏—Ç–µ –Ω–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–π –¥–µ–ø–ª–æ–π

–°–∫–æ–ø–∏—Ä—É–π—Ç–µ URL, –Ω–∞–ø—Ä–∏–º–µ—Ä:
```
https://martin-ai-xyz123.vercel.app
```

---

## 3Ô∏è‚É£ –û–±–Ω–æ–≤–∏—Ç–µ Google Cloud Console

https://console.cloud.google.com/apis/credentials

–ù–∞–π–¥–∏—Ç–µ –≤–∞—à OAuth Client ‚Üí –Ω–∞–∂–º–∏—Ç–µ ‚úèÔ∏è

**–î–æ–±–∞–≤—å—Ç–µ:**

**JavaScript origins:**
```
https://–≤–∞—à-–¥–æ–º–µ–Ω.vercel.app
```

**Redirect URIs:**
```
https://–≤–∞—à-–¥–æ–º–µ–Ω.vercel.app/api/auth/google/callback
```

‚ö†Ô∏è –ó–∞–º–µ–Ω–∏—Ç–µ `–≤–∞—à-–¥–æ–º–µ–Ω` –Ω–∞ –†–ï–ê–õ–¨–ù–´–ô Vercel –¥–æ–º–µ–Ω!

**SAVE** ‚Üí –ü–æ–¥–æ–∂–¥–∏—Ç–µ **5-10 –º–∏–Ω—É—Ç**

---

## 4Ô∏è‚É£ –ü—Ä–æ–≤–µ—Ä—å—Ç–µ KV –±–∞–∑—É

**Vercel Dashboard ‚Üí Storage**

- –î–æ–ª–∂–Ω–∞ –±—ã—Ç—å KV –±–∞–∑–∞
- **Connected Projects** ‚Üí –≤–∞—à –ø—Ä–æ–µ–∫—Ç –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –≤ —Å–ø–∏—Å–∫–µ

–ï—Å–ª–∏ –Ω–µ—Ç - —Å–æ–∑–¥–∞–π—Ç–µ:
**Storage ‚Üí Create Database ‚Üí KV ‚Üí Create ‚Üí Connect Project**

---

## 5Ô∏è‚É£ Redeploy

–ü–æ—Å–ª–µ –í–°–ï–• –∏–∑–º–µ–Ω–µ–Ω–∏–π:

**Vercel Dashboard ‚Üí Deployments ‚Üí ... (—Ç—Ä–∏ —Ç–æ—á–∫–∏) ‚Üí Redeploy**

–ü–æ–¥–æ–∂–¥–∏—Ç–µ 2-3 –º–∏–Ω—É—Ç—ã

---

## 6Ô∏è‚É£ –î–µ–ø–ª–æ–π –æ–±–Ω–æ–≤–ª–µ–Ω–Ω–æ–≥–æ –∫–æ–¥–∞

–¢–µ–ø–µ—Ä—å –Ω—É–∂–Ω–æ –∑–∞–¥–µ–ø–ª–æ–∏—Ç—å –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–π –∫–æ–¥:

```bash
git add .
git commit -m "Fix Google OAuth in Telegram Mini App"
git push
```

Vercel –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–¥–µ–ø–ª–æ–∏—Ç –Ω–æ–≤—É—é –≤–µ—Ä—Å–∏—é (1-2 –º–∏–Ω—É—Ç—ã)

---

## 7Ô∏è‚É£ –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–±–æ—Ç—É

### –í –±—Ä–∞—É–∑–µ—Ä–µ:
1. –û—Ç–∫—Ä–æ–π—Ç–µ `https://–≤–∞—à-–¥–æ–º–µ–Ω.vercel.app`
2. Settings ‚Üí –ü–æ–¥–∫–ª—é—á–∏—Ç—å Google
3. –í–æ–π–¥–∏—Ç–µ –≤ –∞–∫–∫–∞—É–Ω—Ç
4. –î–æ–ª–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å "–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —É—Å–ø–µ—à–Ω–æ!"

### –í Telegram:
1. –û—Ç–∫—Ä–æ–π—Ç–µ –≤–∞—à–µ–≥–æ –±–æ—Ç–∞
2. –ó–∞–ø—É—Å—Ç–∏—Ç–µ Mini App
3. Settings ‚Üí –ü–æ–¥–∫–ª—é—á–∏—Ç—å Google
4. –î–æ–ª–∂–µ–Ω –æ—Ç–∫—Ä—ã—Ç—å—Å—è –±—Ä–∞—É–∑–µ—Ä
5. –í–æ–π–¥–∏—Ç–µ –≤ Google
6. –ü–æ—Å–ª–µ —É—Å–ø–µ—Ö–∞ –≤–µ—Ä–Ω–∏—Ç–µ—Å—å –≤ Telegram
7. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ —Å—Ç–∞—Ç—É—Å "‚úì –ü–æ–¥–∫–ª—é—á–µ–Ω–æ"

---

## üìä –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤

**Vercel Dashboard ‚Üí Deployments ‚Üí Runtime Logs**

–î–æ–ª–∂–Ω–æ –±—ã—Ç—å:
```
‚úÖ Tokens saved to KV for user...
‚úÖ Connection check for user...
```

–ù–ï –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å:
```
‚ùå Tokens saved to memory
‚ùå redirect_uri_mismatch
```

---

## üêõ –ï—Å–ª–∏ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

### –ü—Ä–æ–±–ª–µ–º–∞: "redirect_uri_mismatch"

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ `GOOGLE_REDIRECT_URI` –Ω–∞ Vercel **–¢–û–ß–ù–û** —Å–æ–≤–ø–∞–¥–∞–µ—Ç —Å Google Console
2. –£–±–µ–¥–∏—Ç–µ—Å—å –ù–ï–¢ –ø—Ä–æ–±–µ–ª–æ–≤
3. –ü–æ–¥–æ–∂–¥–∏—Ç–µ 10 –º–∏–Ω—É—Ç –ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ Google Console
4. Redeploy

### –ü—Ä–æ–±–ª–µ–º–∞: OAuth –Ω–µ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –∫–æ–¥ –∑–∞–¥–µ–ø–ª–æ–µ–Ω (—à–∞–≥ 6)
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ Vercel –Ω–∞ –æ—à–∏–±–∫–∏
3. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –≤ –æ–±—ã—á–Ω–æ–º –±—Ä–∞—É–∑–µ—Ä–µ —Å–Ω–∞—á–∞–ª–∞

### –ü—Ä–æ–±–ª–µ–º–∞: –¢–æ–∫–µ–Ω—ã –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ KV –±–∞–∑–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∞ (—à–∞–≥ 4)
2. –í –ª–æ–≥–∞—Ö –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å "saved to KV", –∞ –ù–ï "to memory"
3. Redeploy –ø–æ—Å–ª–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è KV

---

## üìù –ß–µ–∫-–ª–∏—Å—Ç

–ü–µ—Ä–µ–¥ –ø—Ä–æ–≤–µ—Ä–∫–æ–π:

- [ ] –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –Ω–∞ Vercel –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ
- [ ] `GOOGLE_REDIRECT_URI` —Å–æ–¥–µ—Ä–∂–∏—Ç —Ä–µ–∞–ª—å–Ω—ã–π Vercel –¥–æ–º–µ–Ω
- [ ] –í Google Console –¥–æ–±–∞–≤–ª–µ–Ω—ã Vercel URLs
- [ ] KV –±–∞–∑–∞ —Å–æ–∑–¥–∞–Ω–∞ –∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∞
- [ ] –ö–æ–¥ –∑–∞–¥–µ–ø–ª–æ–µ–Ω (git push)
- [ ] Redeploy –≤—ã–ø–æ–ª–Ω–µ–Ω
- [ ] –ü—Ä–æ—à–ª–æ 5-10 –º–∏–Ω—É—Ç –ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ Google

---

## üÜò –ù—É–∂–Ω–∞ –¥–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è?

–°–º–æ—Ç—Ä–∏—Ç–µ –ø–æ–ª–Ω—É—é –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—é:
**`TELEGRAM_GOOGLE_AUTH_FIX.md`**

---

## üéâ –ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

Google –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –≤ Telegram Mini App!

–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ —Å–º–æ–≥—É—Ç:
- –ü–æ–¥–∫–ª—é—á–∞—Ç—å Google –∞–∫–∫–∞—É–Ω—Ç
- –ü—Ä–æ–≤–µ—Ä—è—Ç—å Gmail
- –ü—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å Google Calendar

**–£—Å–ø–µ—Ö–æ–≤! üöÄ**

