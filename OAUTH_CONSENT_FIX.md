# üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∞–Ω–∏—è –Ω–∞ —ç–∫—Ä–∞–Ω–µ –≤–≤–æ–¥–∞ Email

## üêõ –ü—Ä–æ–±–ª–µ–º–∞:

–û–∫–Ω–æ Google OAuth –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è ‚Üí –≤–≤–æ–¥–∏—Ç–µ email ‚Üí –Ω–∞–∂–∏–º–∞–µ—Ç–µ "–î–∞–ª–µ–µ" ‚Üí **–ù–ò–ß–ï–ì–û –ù–ï –ü–†–û–ò–°–•–û–î–ò–¢**

–≠—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç —á—Ç–æ **OAuth Consent Screen –Ω–µ –ø–æ–ª–Ω–æ—Å—Ç—å—é –Ω–∞—Å—Ç—Ä–æ–µ–Ω**.

---

## ‚úÖ –†–ï–®–ï–ù–ò–ï - –ü–æ–ª–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ OAuth Consent Screen:

### **–®–∞–≥ 1: –û—Ç–∫—Ä–æ–π—Ç–µ OAuth Consent Screen**

https://console.cloud.google.com/apis/credentials/consent

---

### **–®–∞–≥ 2: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ Publishing status**

–í–≤–µ—Ä—Ö—É —Å—Ç—Ä–∞–Ω–∏—Ü—ã –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å:
```
Publishing status: Testing
```

**–ï—Å–ª–∏ –Ω–∞–ø–∏—Å–∞–Ω–æ "Not published" –∏–ª–∏ –¥—Ä—É–≥–æ–µ:**
1. –ù–∞–∂–º–∏—Ç–µ **"PUBLISH APP"**
2. –í—ã–±–µ—Ä–∏—Ç–µ **"Testing"** (–Ω–µ Production!)
3. –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ

---

### **–®–∞–≥ 3: –ù–∞—Å—Ç—Ä–æ–π—Ç–µ OAuth consent screen (–ø–æ–ª–Ω–æ—Å—Ç—å—é)**

–ù–∞–∂–º–∏—Ç–µ **"EDIT APP"** (–∫–Ω–æ–ø–∫–∞ —Å–ø—Ä–∞–≤–∞)

#### **–≠–∫—Ä–∞–Ω 1 - OAuth consent screen:**

**App information:**
- App name: `Martin AI Assistant`
- User support email: –≤—ã–±–µ—Ä–∏—Ç–µ —Å–≤–æ–π email
- App logo: (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –º–æ–∂–Ω–æ –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å)

**App domain:**
- Application home page: `http://localhost:3001` (–º–æ–∂–Ω–æ –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å –¥–ª—è Testing)
- Application privacy policy: (–º–æ–∂–Ω–æ –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å –¥–ª—è Testing)
- Application terms of service: (–º–æ–∂–Ω–æ –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å –¥–ª—è Testing)

**Authorized domains:** (–æ—Å—Ç–∞–≤—å—Ç–µ –ø—É—Å—Ç—ã–º –¥–ª—è localhost)

**Developer contact information:**
- Email addresses: –≤–∞—à email

**–ù–∞–∂–º–∏—Ç–µ "SAVE AND CONTINUE"**

---

#### **–≠–∫—Ä–∞–Ω 2 - Scopes:**

**–û—á–µ–Ω—å –≤–∞–∂–Ω–æ! –ù–∞–∂–º–∏—Ç–µ "ADD OR REMOVE SCOPES"**

**–ù–∞–π–¥–∏—Ç–µ –∏ –æ—Ç–º–µ—Ç—å—Ç–µ –≠–¢–ò scopes:**

–í –ø–æ–∏—Å–∫–µ –≤–≤–µ–¥–∏—Ç–µ "calendar":
- ‚úÖ `.../auth/calendar.readonly` - See your calendars
- ‚úÖ `.../auth/calendar.events` - See and edit events

–í –ø–æ–∏—Å–∫–µ –≤–≤–µ–¥–∏—Ç–µ "gmail":
- ‚úÖ `.../auth/gmail.readonly` - Read all your email
- ‚úÖ `.../auth/gmail.send` - Send email on your behalf (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

–í –ø–æ–∏—Å–∫–µ –≤–≤–µ–¥–∏—Ç–µ "userinfo":
- ‚úÖ `.../auth/userinfo.email` - See your email address
- ‚úÖ `.../auth/userinfo.profile` - See your personal info

**–ù–∞–∂–º–∏—Ç–µ "UPDATE"**

**–ù–∞–∂–º–∏—Ç–µ "SAVE AND CONTINUE"**

---

#### **–≠–∫—Ä–∞–Ω 3 - Test users:**

**–û–ß–ï–ù–¨ –í–ê–ñ–ù–û!**

**–ù–∞–∂–º–∏—Ç–µ "ADD USERS"**

–í–≤–µ–¥–∏—Ç–µ **–¢–û–ß–ù–û –¢–û–¢ –ñ–ï email**, –∫–æ—Ç–æ—Ä—ã–º –±—É–¥–µ—Ç–µ –≤—Ö–æ–¥–∏—Ç—å:
```
–≤–∞—à-email@gmail.com
```

**–ù–∞–∂–º–∏—Ç–µ "ADD"**

**–ù–∞–∂–º–∏—Ç–µ "SAVE AND CONTINUE"**

---

#### **–≠–∫—Ä–∞–Ω 4 - Summary:**

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –≤—Å–µ –∑–∞–ø–æ–ª–Ω–µ–Ω–æ.

**–ù–∞–∂–º–∏—Ç–µ "BACK TO DASHBOARD"**

---

### **–®–∞–≥ 4: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å**

–ù–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ OAuth consent screen –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å:

```
‚úÖ Publishing status: Testing
‚úÖ Test users: –≤–∞—à-email@gmail.com (1 user)
‚úÖ Scopes: 6 scopes added
```

---

## üöÄ –ü–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:

1. **–í–µ—Ä–Ω–∏—Ç–µ—Å—å –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ**
2. **–û–±–Ω–æ–≤–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É** (Ctrl + F5)
3. **Settings ‚Üí –ü–æ–¥–∫–ª—é—á–∏—Ç—å Google**
4. **–¢–µ–ø–µ—Ä—å –ø–æ—Å–ª–µ –≤–≤–æ–¥–∞ email –¥–æ–ª–∂–Ω–∞ –ø–æ—è–≤–∏—Ç—å—Å—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —Å –ø–∞—Ä–æ–ª–µ–º!**

---

## üîç –ß—Ç–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –µ—Å–ª–∏ –≤—Å–µ –µ—â–µ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:

### **1. –û—Ç–∫—Ä–æ–π—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ (F12 ‚Üí Console)**

–ü—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ "–î–∞–ª–µ–µ" –ø–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –µ—Å—Ç—å –ª–∏ –æ—à–∏–±–∫–∏.

–í–æ–∑–º–æ–∂–Ω—ã–µ –æ—à–∏–±–∫–∏:
- `redirect_uri_mismatch` ‚Üí –ø—Ä–æ–≤–µ—Ä—å—Ç–µ Redirect URI –≤ OAuth Client
- `invalid_scope` ‚Üí –Ω–µ –≤—Å–µ scopes –¥–æ–±–∞–≤–ª–µ–Ω—ã
- `access_denied` ‚Üí –Ω–µ –¥–æ–±–∞–≤–ª–µ–Ω—ã –≤ Test users

---

### **2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ Redirect URI –≤ OAuth Client**

https://console.cloud.google.com/apis/credentials

–ù–∞–∂–º–∏—Ç–µ –Ω–∞ –≤–∞—à OAuth 2.0 Client ID

**Authorized redirect URIs –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –¢–û–ß–ù–û:**
```
http://localhost:3001/api/auth/google/callback
```

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ:
- ‚úÖ http (–Ω–µ https)
- ‚úÖ localhost (–Ω–µ 127.0.0.1)
- ‚úÖ –ø–æ—Ä—Ç 3001
- ‚úÖ –ø—É—Ç—å `/api/auth/google/callback`
- ‚úÖ –ù–ï–¢ –ø—Ä–æ–±–µ–ª–æ–≤ –≤ –Ω–∞—á–∞–ª–µ/–∫–æ–Ω—Ü–µ

**–°–æ—Ö—Ä–∞–Ω–∏—Ç–µ –µ—Å–ª–∏ –∏—Å–ø—Ä–∞–≤–∏–ª–∏.**

---

### **3. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –¥—Ä—É–≥–æ–π –±—Ä–∞—É–∑–µ—Ä**

–ò–Ω–æ–≥–¥–∞ Chrome –±–ª–æ–∫–∏—Ä—É–µ—Ç OAuth –¥–ª—è localhost.

**–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –≤:**
- Edge
- Firefox
- –ò–ª–∏ –≤ –ø—Ä–∏–≤–∞—Ç–Ω–æ–π –≤–∫–ª–∞–¥–∫–µ Chrome (Ctrl + Shift + N)

---

## üìã –ö—Ä–∞—Ç–∫–∏–π —á–µ–∫–ª–∏—Å—Ç:

```
‚ñ° OAuth Consent Screen –Ω–∞—Å—Ç—Ä–æ–µ–Ω (EDIT APP)
‚ñ° Publishing status: Testing
‚ñ° Scopes –¥–æ–±–∞–≤–ª–µ–Ω—ã (–º–∏–Ω–∏–º—É–º 6):
  - calendar.readonly
  - calendar.events
  - gmail.readonly
  - userinfo.email
  - userinfo.profile
‚ñ° Test users: –≤–∞—à Gmail –¥–æ–±–∞–≤–ª–µ–Ω
‚ñ° OAuth Client ID: Redirect URI –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π
‚ñ° –ë—Ä–∞—É–∑–µ—Ä —Ä–∞–∑—Ä–µ—à–∞–µ—Ç popups
```

---

## üÜò –ï—Å–ª–∏ –≤—Å–µ —Ä–∞–≤–Ω–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:

–°–¥–µ–ª–∞–π—Ç–µ —ç—Ç–æ:

1. –û—Ç–∫—Ä–æ–π—Ç–µ –∫–æ–Ω—Å–æ–ª—å (F12)
2. –ù–∞–∂–º–∏—Ç–µ "–ü–æ–¥–∫–ª—é—á–∏—Ç—å Google"
3. –í–≤–µ–¥–∏—Ç–µ email, –Ω–∞–∂–º–∏—Ç–µ "–î–∞–ª–µ–µ"
4. **–°–∫–æ–ø–∏—Ä—É–π—Ç–µ –≤—Å–µ –æ—à–∏–±–∫–∏ –∏–∑ –∫–æ–Ω—Å–æ–ª–∏**
5. –ü–æ–∫–∞–∂–∏—Ç–µ –º–Ω–µ - —è —Ç–æ—á–Ω–æ —Å–∫–∞–∂—É –≤ —á–µ–º –ø—Ä–æ–±–ª–µ–º–∞!

---

**–ù–∞—á–Ω–∏—Ç–µ —Å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ OAuth Consent Screen - —ç—Ç–æ —Å–∞–º–∞—è —á–∞—Å—Ç–∞—è –ø—Ä–∏—á–∏–Ω–∞!** üöÄ




